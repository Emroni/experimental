<script>
    var width = 5;
    var length = 200;
    var spacing = 5;
    var speed = 1;

    var camera = new THREE.PerspectiveCamera(75, 1, 1, 5000);
    var scene = new THREE.Scene();
    camera.position.z = 300;
    camera.position.y = 200;
    camera.lookAt(scene.position);
    var renderer = new THREE.WebGLRenderer();
    renderer.setPixelRatio(window.devicePixelRatio);
    document.body.append(renderer.domElement);

    var material = new THREE.SpriteMaterial({
        color: new THREE.Color('white')
    });

    var radius = spacing / Math.sin(Math.PI * 2 / length);

    var i, j, n, dot, group, mat;
    for (i = 0; i < length; i++) {
        group = new THREE.Group();
        scene.add(group);

        n = (i / length) * (Math.PI * 2);
        group.position.x = Math.sin(n) * radius;
        group.position.z = Math.cos(n) * radius;
        group.rotation.x = n * 0.5;
        group.rotation.y = n;
        group.rotation.order = 'YXZ';

        mat = material.clone();
        mat.color.setHSL(i / length, 1, 0.5);

        for (j = 0; j < width; j++) {
            dot = new THREE.Sprite(mat);
            group.add(dot);
            dot.scale.set(3, 3);
            dot.position.y = (((j + 0.5) / width) * 2 - 1) * width * spacing * 0.5;
        }
    }

    self.addEventListener('resize', resize);
    function resize() {
        camera.aspect = self.innerWidth / self.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(self.innerWidth, self.innerHeight);
    }
    resize();

    function render() {
        requestAnimationFrame(render);

        scene.rotation.y += 0.005 * speed;

        for (i = 0; i < scene.children.length; i++) {
            group = scene.children[i];
            group.rotation.x += 0.01 * speed;
        }

        renderer.render(scene, camera);
    }
    render();
</script>